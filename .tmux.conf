# Remap prefix to Ctrl+Space
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# Easier splits
bind | split-window -h
bind - split-window -v

# Mouse support
set -g mouse on

# Copy to system clipboard (macOS)
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Faster escape time
set -sg escape-time 10

# Better colors
set -g default-terminal "screen-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Increase scrollback
set -g history-limit 10000

# Popup tools (prefix + key opens floating window)
bind g display-popup -d "#{pane_current_path}" -w 90% -h 90% -E "lazygit"
bind t display-popup -d "#{pane_current_path}" -w 80% -h 60% -E "bb tasks 2>/dev/null | fzf --header 'bb tasks' | awk '{print $1}' | xargs -I{} bb {}"
bind p display-popup -d "#{pane_current_path}" -w 60% -h 40% -E "ports; echo; echo 'Press enter to close'; read"

# fzf session switcher
bind s display-popup -w 60% -h 40% -E "tmux list-sessions -F '#{session_name}' | fzf --header 'Switch session' | xargs -I{} tmux switch-client -t {}"
